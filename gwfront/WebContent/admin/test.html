<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link href="../css/app.css" rel="stylesheet" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <title>Document</title>
    <style>
      /*가로로 배치하기 위한 속성*/
      .flex-container {
        display: flex;
        flex-wrap: wrap;
      }

      td {
        font-size: 1rem;
        padding: 20px;
      }
    </style>
  </head>

  <body>
    <h2>직무 관리</h2>
    <div class="flex-container">
      <input type="text" id="addValueId" />
      <input type="text" id="addValueName" />
      <input type="button" value="추가" onclick="addList()" />
    </div>

    <hr />

    <table class="m-lg-4">
      <thead>
        <tr>
          <th>직무 아이디</th>
          <th>직무명</th>
        </tr>
      </thead>
      <tbody id="tBody">
        <tr id="addTd">
          <td class="editable" style="border: 1px solid">ii</td>
          <td class="editable" style="border: 1px solid">이이</td>
        </tr>
      </tbody>
      <tr id="addTd">
        <td class="editable" style="border: 1px solid">bb</td>
        <td class="editable" style="border: 1px solid">비비</td>
      </tr>
    </table>
    <br />
    <button class="btn-dark m-lg-2" type="button" id="saveJob">저장</button>
  </body>

  <script>
    $(document).ready(function () {
      //지우개 클릭시
      $(document).on("click", ".fa-eraser", function () {
        var value = $(this).val();
        console.log(value);
        //var td = $(this).parentsUtil("td");
        var tr = $(this).parent("td");

        tr.remove();
      });
      //더블클릭시
      $(document).on("dblclick", ".editable", function () {
        var value = $(this).text();
        console.log(value);

        var input =
          "<input type='text' class='input-data' placeholder='" +
          value +
          "'/><span class='fa fa-eraser'/>";
        $(this).html(input);

        $(this).removeClass("editable");
      });
      //마우스 다른데에 둘때
      $(document).on("blur", ".input-data", function () {
        var value = $(this).val();
        var td = $(this).parent("td");
        $(this).remove();
        td.html(value);
        td.addClass("editable");
      });
      //엔터키 누를때
      $(document).on("keypress", ".input-data", function (e) {
        var key = e.which;
        if (key == 13) {
          var value = $(this).val();
          var td = $(this).parent("td");
          $(this).remove();
          td.html(value);
          td.addClass("editable");
        }
      });
    });

    function addList() {
      var tBody = document.getElementById("tBody");
      var addValueId = document.getElementById("addValueId").value;
      var addValueName = document.getElementById("addValueName").value;
      var tr = document.createElement("tr");
      tr.setAttribute("id", "addTd");

      var td1 = document.createElement("td");

      td1.setAttribute("td", addValueId);
      td1.setAttribute("style", "border:1px solid;");
      td1.setAttribute("class", "editable");
      var textNode1 = document.createTextNode(addValueId);
      td1.appendChild(textNode1);
      var td2 = document.createElement("td");
      td2.setAttribute("td", addValueName);
      td2.setAttribute("style", "border:1px solid;");
      td2.setAttribute("class", "editable");
      var textNode2 = document.createTextNode(addValueName);
      td2.appendChild(textNode2);
      tr.appendChild(td1);
      tr.appendChild(td2);

      tBody.appendChild(tr);
    }
  </script>
  <script src="../js/app.js"></script>
</html>
